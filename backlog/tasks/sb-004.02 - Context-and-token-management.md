# Context and token management

| Field | Value |
|-------|-------|
| ID | SB-004.02 |
| Parent | SB-004 |
| Status | todo |
| Priority | high |
| Created | 2025-01-13 |

## Description

Manage context window for 128K token limit:
- Token counting with tiktoken or approximation
- Context prioritization (system > recent > tools > history)
- Automatic history summarization when approaching limit
- File content chunking for large files

## Acceptance Criteria

- [ ] Accurate token counting
- [ ] Context builder with prioritization
- [ ] History summarization trigger
- [ ] Large file chunking strategy
- [ ] Context overflow prevention
