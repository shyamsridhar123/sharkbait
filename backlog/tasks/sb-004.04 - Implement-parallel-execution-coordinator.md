# Implement parallel execution coordinator

| Field | Value |
|-------|-------|
| ID | SB-004.04 |
| Parent | SB-004 |
| Status | Completed |
| Priority | medium |
| Created | 2026-01-28 |

## Description

Implement parallel agent/mode execution with fan-out/fan-in coordination.

Per Anthropic guidance:
> "LLMs can sometimes work simultaneously on a task and have their outputs aggregated programmatically."

**Parallel Execution Strategies:**
| Strategy | Behavior | Use Case |
|----------|----------|----------|
| `all` | Wait for all agents, then consolidate | Comprehensive review |
| `race` | Return first to complete | Speed-critical tasks |
| `quorum` | Return when majority agree | Decision-making |

**Consolidation Strategies:**
| Strategy | Use Case | Implementation |
|----------|----------|----------------|
| `merge` | Combine unique findings | Dedupe by finding, merge contexts |
| `vote` | Agree on a decision | Weighted majority voting |
| `best` | Select highest-quality result | Score each result, pick best |

**Example: Parallel Code Review:**
```typescript
const reviews = await executeParallel({
  agents: [
    { agent: "reviewer", mode: "bugs", weight: 1.0 },
    { agent: "reviewer", mode: "security", weight: 1.5 },
    { agent: "reviewer", mode: "style", weight: 0.5 },
  ],
  strategy: "all",
  timeout: 30000,
  consolidation: "merge",
});
```

## Acceptance Criteria

- [ ] `executeParallel()` function with configurable strategies
- [ ] Support for `all`, `race`, `quorum` execution strategies
- [ ] Support for `merge`, `vote`, `best` consolidation strategies
- [ ] Timeout handling per agent
- [ ] Weighted results for voting/best selection
- [ ] Error handling for partial failures
- [ ] Integration with prompting modes

## References

- AGENT_ARCHITECTURE.md Section 6.5: Parallel Execution Coordinator
