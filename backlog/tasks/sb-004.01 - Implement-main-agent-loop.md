# Implement main agent loop

| Field | Value |
|-------|-------|
| ID | SB-004.01 |
| Parent | SB-004 |
| Status | todo |
| Priority | high |
| Created | 2025-01-13 |

## Description

Core agent loop following perceive → think → act pattern:
- Receive user input or tool results
- Build context with system prompt, history, tools
- Send to LLM and stream response
- Parse tool calls and execute
- Loop until task complete or stop signal

## Acceptance Criteria

- [ ] Async generator-based agent loop
- [ ] Graceful interruption handling
- [ ] Max iterations limit
- [ ] Token usage tracking
- [ ] Proper error recovery
