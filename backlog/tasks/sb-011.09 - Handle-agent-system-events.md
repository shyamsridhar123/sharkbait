# Handle Agent System Events in UI

| Field | Value |
|-------|-------|
| ID | SB-011.09 |
| Parent | SB-011 |
| Status | todo |
| Priority | high |
| Created | 2026-01-29 |

## Description

The new agent system (SB-005) emits events that the UI currently ignores:

| Event | Current | Should Show |
|-------|---------|-------------|
| `agent_start` | Ignored | "ü¶à Coder agent starting..." |
| `handoff` | Ignored | "Delegating to reviewer..." |
| `replan` | Ignored | "‚ö†Ô∏è Re-planning: reason" |
| `done` (with result) | Partial | Agent stats, duration |

## Acceptance Criteria

- [ ] Handle `agent_start` event - show agent name and mode
- [ ] Handle `handoff` event - show delegation message
- [ ] Handle `replan` event - show warning with reason
- [ ] Enhanced `done` event - show execution stats
- [ ] Visual distinction between agents (colors per agent type)

## Technical Notes

Need to update `app.tsx` event handler:

```tsx
case "agent_start":
  setCurrentOutput(`ü¶à ${event.agent} agent starting${event.mode ? ` (${event.mode} mode)` : ""}...\n`);
  break;
case "handoff":
  setCurrentOutput(prev => prev + `\nüì§ Delegating to ${event.to}...\n`);
  break;
case "replan":
  setCurrentOutput(prev => prev + `\n‚ö†Ô∏è Re-planning: ${event.reason}\n`);
  break;
```

Use agent colors from `src/agents/types.ts`:
- orchestrator: blue
- coder: green
- reviewer: yellow
- planner: cyan
- debugger: red
- explorer: magenta
