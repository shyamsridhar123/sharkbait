# Implement Confirmation Dialogs for Destructive Actions

| Field | Value |
|-------|-------|
| ID | SB-011.08 |
| Parent | SB-011 |
| Status | todo |
| Priority | high |
| Created | 2026-01-29 |

## Description

PRD Section 7.3 shows:
```
Apply this change? [y/n] y
```

Currently, the agent applies file edits immediately without asking.

Need confirmation for:
- File edits (`edit_file`)
- File deletions (`delete_file`)
- Dangerous shell commands
- Git push operations
- PR creation

## Acceptance Criteria

- [ ] Create `ConfirmDialog.tsx` component
- [ ] Hook into tool execution before destructive actions
- [ ] Show what will be changed
- [ ] Accept y/n/yes/no input
- [ ] Resume or cancel based on response
- [ ] Timeout with default action (cancel)

## Technical Notes

1. Add pre-execution hook to tool registry
2. For edit_file: show diff view before confirmation
3. For shell: show command before execution
4. Store pending action, wait for user input
5. Resume execution on confirmation

## Component API

```tsx
interface ConfirmDialogProps {
  message: string;
  details?: string;
  onConfirm: () => void;
  onCancel: () => void;
  timeout?: number;  // Auto-cancel after N seconds
}
```

## Flow

```
Agent: "I'll fix the bug in auth.ts"
       [Shows diff view]
       "Apply this change? [y/n]"
User:  "y"
Agent: "âœ“ Applied fix to auth.ts"
```
